以下是整理后的MySQL配置文件内容，保存为`mysql.md`文件：

```
## 前言
本章将学习MySQL配置文件相关内容（也称为选项文件）。

## 配置文件位置
通过 `mysqld --help --verbose` 命令可查看配置文件路径：
```

/etc/my.cnf              # 全局

/etc/mysql/my.cnf         # 全局

/usr/local/mysql8/etc/my.cnf  # 全局

~/.my.cnf                # 用户级

## 简单配置文件示例

cnf

[client]

port=3306

socket=/tmp/mysql.sock

[mysqld]

port=3306

socket=/tmp/mysql.sock

key-buffer-size=16M

max-allowed-packet=128M

[mysqldump]

quick

```
## 配置文件语法要求
1. `[组名]` 定义配置组（如 `[mysqld]`）
2. `#` 开头表示注释
3. 参数可用 `-` 或 `_`（如 `bind-address=*` 和 `bind_address=*` 等价）
4. `=` 两侧允许空格
5. 支持版本特定组（如 `[mysqld-8.4]`）
6. 包含其他配置文件：
```

cnf

!include /path/to/file.cnf

!includedir /config/directory/  # 需.cnf后缀

```
## 常用参数详解

### 客户端参数
```

cnf

[client]

port=3306

socket=/tmp/mysql.sock

```
### 服务端核心参数
| 参数 | 说明 |
|------|------|
| `port=3306` | 服务端口 |
| `socket=/tmp/mysql.sock` | 套接字文件位置 |
| `basedir=/usr/local/mysql8/` | MySQL安装目录 |
| `datadir=/usr/local/mysql8/data/` | 数据存储目录 |
| `user=mysql` | 运行用户 |
| `log-error=/path/error.log` | 错误日志路径 |
| `bind-address=*` | 监听所有IP（逗号分隔多IP） |

### 性能优化参数
| 参数 | 默认值 | 说明 |
|------|--------|------|
| `max-connections=700` | 151 | 最大连接数 [1-100000] |
| `back-log=151` | -1 | 等待连接队列大小 [1-65535] |
| `wait-timeout=90` | 28800 | 非交互连接超时（秒） |
| `key-buffer-size=100M` | 8M | MyISAM索引缓存 |
| `max-allowed-packet=100M` | 64M | 最大数据包大小 |
| `tmp-table-size=16M` | 16M | 内存临时表最大值 |
| `table-open-cache=4000` | 2000 | 表缓存数量 |
| `innodb-buffer-pool-size=1G` | 128M | InnoDB缓冲池大小（建议物理内存80%） |

### InnoDB专属参数
| 参数 | 推荐值 | 说明 |
|------|--------|------|
| `innodb-flush-log-at-trx-commit=1` | 1 | 日志刷盘策略（0:延后1秒, 1:实时, 2:折衷） |
| `sync-binlog=1` | 1 | Binlog刷盘策略（N=刷盘频率） |
| `innodb-io-capacity=200` | 200 | 后台IOPS能力（HDD:100, SSD:200+, NVMe:1000+） |
| `innodb-file-per-table=ON` | ON | 每表独立表空间 |
| `innodb-compression-level=6` | 6 | 表压缩级别（0-9） |
| `innodb-log-file-size=48M` | 48M | 重做日志大小（8.0+用`innodb_redo_log_capacity`替代） |

> **关键事务安全配置**：<br>
> `innodb-flush-log-at-trx-commit=1` + `sync-binlog=1` 可保证数据强一致性

## 完整配置示例
`/etc/my.cnf`：
```

cnf

[client]

port = 3306

socket = /tmp/mysql.sock

[mysqld]

server-id = 1

port = 3306

socket = /tmp/mysql.sock

basedir = /usr/local/mysql8/

datadir = /usr/local/mysql8/data/

user = mysql

log-error = /usr/local/mysql8/data/mysqld_start.err

bind-address = *

default-storage-engine = INNODB

group-concat-max-len = 102400

skip-name-resolve

back-log = -1

max-connections = 700

wait-timeout = 90

max-allowed-packet = 64M

read-buffer-size = 128K

innodb-flush-log-at-trx-commit = 1

sync-binlog = 1

innodb-buffer-pool-size = 1G

innodb-io-capacity = 100

[mysqldump]

quick

```
启动命令：
```

bash

/usr/local/mysql8/bin/mysqld_safe --user=mysql &

```
## 参考文档
- [MySQL 8.4 系统变量文档](https://dev.mysql.com/doc/refman/8.4/en/server-system-variables.html)
- [二进制日志配置](https://dev.mysql.com/doc/refman/8.4/en/replication-options-binary-log.html)
- [服务器ID配置](https://dev.mysql.com/doc/refman/8.4/en/replication-options.html#sysvar_server_id)

---
**关于作者**  
陸風睿 - GNU/Linux工程师 & 开源爱好者  
QQ: 281957576 | 微信: jiulongxiaotianci  
GitHub: [https://github.com/jimcat8](https://github.com/jimcat8)
```

> 文件保存说明：
>
> 1. 将内容复制到文本编辑器
> 2. 保存为 `mysql.md`
> 3. 关键配置说明：
>    - 事务安全配置需同时启用 `innodb-flush-log-at-trx-commit=1`和 `sync-binlog=1`
>    - `skip-name-resolve`可加速连接但需用IP访问
>    - `innodb-buffer-pool-size`建议设为物理内存的80%
>    - 生产环境SSD建议 `innodb-io-capacity=1000+`